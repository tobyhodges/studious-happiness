<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Workflows with Python and Git: All in One View</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="assets/styles.css">
<script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="favicons/incubator/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicons/incubator/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="favicons/incubator/favicon-16x16.png">
<link rel="manifest" href="favicons/incubator/site.webmanifest">
<link rel="mask-icon" href="favicons/incubator/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="white">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="black">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md top-nav incubator"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="incubator-logo" alt="Lesson Description" src="assets/images/incubator-logo.svg">
</div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
<li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul>
</li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/aio.html';">Instructor View</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav incubator" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Lesson Description" src="assets/images/incubator-logo-sm.svg">
</div>
    <div class="lesson-title-md">
      Workflows with Python and Git
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            Workflows with Python and Git
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"></ul>
</li>
      </ul>
</div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Workflows with Python and Git
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress incubator">
    <div class="progress-bar incubator" role="progressbar" style="width: %" aria-valuenow="" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text">
<li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul>
</li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/aio.html">Instructor View</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->

            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="21-review.html">1. Review Exercise</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="30-cmd-line.html">2. Command-Line Programs</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="31-multi-files.html">3. Trying Different Methods</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="32a-flags.html">4. Program Flags</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="32b-defensive-prog.html">5. Defensive Programming</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="33-refactoring.html">6. Refactoring</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="34-importing.html">7. Running Scripts and Importing</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="48-style.html">8. Programming Style</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush10">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading10">
        <a href="49-wrap.html">9. Wrap-Up</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>

                    </ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources">
<a href="aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">

            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-21-review"><p>Content from <a href="21-review.html">Review Exercise</a></p>
<hr>
<p>Last updated on 2025-02-06 |

        <a href="https://github.com/carpentries-incubator/swc-ext-python/edit/main/episodes/21-review.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can we put together all of yesterday’s material?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Apply use of functions, conditionals and loops to solve a
problem.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="review-from-yesterday---all-in-one-exercise" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="review-from-yesterday---all-in-one-exercise" class="callout-inner">
<h3 class="callout-title">Review From Yesterday - All in One
Exercise</h3>
<div class="callout-content">
<p>In your notebook, write a function that determines whether a year
between 1901 and 2000 is a leap year, where it prints a message like
“1904 is a leap year” or “1905 is not a leap year” as output. Use this
function to evaluate the years 1928, 1950, 1959, 1972 and 1990.
Essentially, given this list of years:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>years <span class="op">=</span> [<span class="dv">1928</span>, <span class="dv">1950</span>, <span class="dv">1959</span>, <span class="dv">1972</span>, <span class="dv">1990</span>]</span></code></pre>
</div>
<p>Produce something like:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>1928 is a leap year
1950 is not a leap year.
1959 is not a leap year.
1972 is a leap year
1990 is not a leap year.</code></pre>
</div>
<p>Hint: the percent symbol ‘%’ is the modular operator in Python.
So:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'8 mod 4 equals'</span>, <span class="dv">8</span> <span class="op">%</span> <span class="dv">4</span>)</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'10 mod 4 equals'</span>, <span class="dv">10</span> <span class="op">%</span> <span class="dv">4</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>8 mod 4 equals 0
10 mod 4 equals 2</code></pre>
</div>
<p>If you’re not sure where to start, see the fill-in-the-blank version
of this exercise below.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="kw">def</span> leap_year(year):</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>    <span class="cf">if</span> year <span class="op">%</span> <span class="dv">4</span> <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>        <span class="bu">print</span>(year, <span class="st">"is a leap year"</span>)</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>        <span class="bu">print</span>(year, <span class="st">"is not a leap year."</span>)</span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a>year_list <span class="op">=</span> [<span class="dv">1928</span>, <span class="dv">1950</span>, <span class="dv">1959</span>, <span class="dv">1972</span>, <span class="dv">1990</span>]</span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a><span class="cf">for</span> year <span class="kw">in</span> year_list:</span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a>    leap_year(year)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="review-from-yesterday---step-by-step-breakdown" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="review-from-yesterday---step-by-step-breakdown" class="callout-inner">
<h3 class="callout-title">Review From Yesterday - Step by Step
Breakdown</h3>
<div class="callout-content">
<p>First, try to determine how to use the mod operator <code>%</code> to
determine if a year is divisible by 4 (and thus a leap year or not).</p>
</div>
</div>
</div>
<div id="accordionSpoiler1" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler1" aria-expanded="false" aria-controls="collapseSpoiler1">
  <h3 class="accordion-header" id="headingSpoiler1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Modular Arthimetic </h3>
</button>
<div id="collapseSpoiler1" class="accordion-collapse collapse" data-bs-parent="#accordionSpoiler1" aria-labelledby="headingSpoiler1">
<div class="accordion-body">
<p>If a year in the range specified is divisible by four, it is a leap
year. If a number is divisible by 4, then the arithmetic expression
“number mod four” (or <code>num % 4</code> in Python) will equal
zero.</p>
</div>
</div>
</div>
</div>
<div id="review-from-yesterday---step-by-step-breakdown" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="review-from-yesterday---step-by-step-breakdown" class="callout-inner">
<h3 class="callout-title">Review From Yesterday - Step by Step
Breakdown<em> (continued)</em>
</h3>
<div class="callout-content">
<p>Then, create a conditional statement to use this information, and put
it into a function.</p>
</div>
</div>
</div>
<div id="accordionSpoiler2" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler2" aria-expanded="false" aria-controls="collapseSpoiler2">
  <h3 class="accordion-header" id="headingSpoiler2">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Conditional Statement </h3>
</button>
<div id="collapseSpoiler2" class="accordion-collapse collapse" data-bs-parent="#accordionSpoiler2" aria-labelledby="headingSpoiler2">
<div class="accordion-body">
<p>Fill in the blanks:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>year <span class="op">=</span> <span class="dv">1904</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="cf">if</span> year <span class="op">%</span> <span class="dv">4</span> <span class="op">==</span> _____:</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>    <span class="bu">print</span>(year, _______________)</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a>______:</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>    <span class="bu">print</span>(year, <span class="st">"is not a leap year."</span>)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="review-from-yesterday---step-by-step-breakdown" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="review-from-yesterday---step-by-step-breakdown" class="callout-inner">
<h3 class="callout-title">Review From Yesterday - Step by Step
Breakdown<em> (continued)</em>
</h3>
<div class="callout-content">
<p>Then, create a list of the years given in the exercise. Use a for
loop and your function to evaluate these years.</p>
</div>
</div>
</div>
<div id="accordionSpoiler3" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler3" aria-expanded="false" aria-controls="collapseSpoiler3">
  <h3 class="accordion-header" id="headingSpoiler3">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Function </h3>
</button>
<div id="collapseSpoiler3" class="accordion-collapse collapse" data-bs-parent="#accordionSpoiler3" aria-labelledby="headingSpoiler3">
<div class="accordion-body">
<p>Fill in the blanks:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="kw">def</span> leap_year(year):</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>    _________</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="review-from-yesterday---step-by-step-breakdown" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="review-from-yesterday---step-by-step-breakdown" class="callout-inner">
<h3 class="callout-title">Review From Yesterday - Step by Step
Breakdown<em> (continued)</em>
</h3>
<div class="callout-content">
<p>Finally, use a for loop and your function to evaluate these
years.</p>
</div>
</div>
</div>
<div id="accordionSpoiler4" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler4" aria-expanded="false" aria-controls="collapseSpoiler4">
  <h3 class="accordion-header" id="headingSpoiler4">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Loop </h3>
</button>
<div id="collapseSpoiler4" class="accordion-collapse collapse" data-bs-parent="#accordionSpoiler4" aria-labelledby="headingSpoiler4">
<div class="accordion-body">
<p>Fill in the blanks:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>year_list <span class="op">=</span> [<span class="dv">1928</span>, <span class="dv">1950</span>, <span class="dv">1959</span>, <span class="dv">1972</span>, <span class="dv">1990</span>]</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="cf">for</span> year <span class="kw">in</span> ______:</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>    ________(year)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="kw">def</span> leap_year(year):</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>    <span class="cf">if</span> year <span class="op">%</span> <span class="dv">4</span> <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>        <span class="bu">print</span>(year, <span class="st">"is a leap year"</span>)</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>        <span class="bu">print</span>(year, <span class="st">"is not a leap year."</span>)</span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a>year_list <span class="op">=</span> [<span class="dv">1928</span>, <span class="dv">1950</span>, <span class="dv">1959</span>, <span class="dv">1972</span>, <span class="dv">1990</span>]</span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a><span class="cf">for</span> year <span class="kw">in</span> year_list:</span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a>    leap_year(year)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="additonal-challenge" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="additonal-challenge" class="callout-inner">
<h3 class="callout-title">Additonal Challenge</h3>
<div class="callout-content">
<p>If you have time:</p>
<ol style="list-style-type: decimal">
<li><p>Expand your function so that it correctly categorizes any year
from 0 onwards</p></li>
<li><p>Instead of printing whether a year is a leap year or not, save
the results to a python dictionary, where there are two keys (“leap” and
“not-leap”) and the values are a list of years.</p></li>
</ol>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>Use skills together.</li>
</ul>
</div>
</div>
</div></section><section id="aio-30-cmd-line"><p>Content from <a href="30-cmd-line.html">Command-Line Programs</a></p>
<hr>
<p>Last updated on 2025-01-27 |

        <a href="https://github.com/carpentries-incubator/swc-ext-python/edit/main/episodes/30-cmd-line.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I write Python programs that will work like Unix
command-line tools?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Use the values of command-line arguments in a program.</li>
<li>Read data from standard input in a program so that it can be used in
a pipeline.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>The Jupyter Notebook and other interactive tools are great for
prototyping code and exploring data, but sooner or later one will want
to use that code in a program we can run from the command line. In order
to do that, we need to make our programs work like other Unix
command-line tools. For example, we may want a program that reads a
gapminder data set and plots the gdp of countries over time.</p>
<div id="switching-to-shell-commands" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="switching-to-shell-commands" class="callout-inner">
<h3 class="callout-title">Switching to Shell Commands</h3>
<div class="callout-content">
<p>In this lesson we are switching from typing commands in Jupyter
notebooks to typing commands in a shell terminal window (such as bash).
When you see a <code>$</code> in front of a command that tells you to
run that command in the shell rather than the Python interpreter.</p>
</div>
</div>
</div>
<div id="converting-notebooks" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="converting-notebooks" class="callout-inner">
<h3 class="callout-title">Converting Notebooks</h3>
<div class="callout-content">
<p>The Jupyter Notebook has the ability to convert all of the cells of a
current Notebook into a python program. To do this, go to
<code>File</code> -&gt; <code>Download as</code> and select
<code>Python (.py)</code> to get the current notebook as a Python
script.</p>
</div>
</div>
</div>
<section><h2 class="section-heading" id="setting-up-your-project">Setting up your project<a class="anchor" aria-label="anchor" href="#setting-up-your-project"></a>
</h2>
<hr class="half-width">
<p>Up until now, we’ve been working in the data folder directly. Because
we’re going to be dealing with more files of different types in this
lesson, let’s do a little rearranging:</p>
<ul>
<li>On your desktop, create a folder called
<code>swc-gapminder</code>.</li>
<li>Move the <code>data</code> folder you’ve been using into this
folder.</li>
<li>Inside swc-gapminder, create a folder called <code>figs</code>
</li>
<li>To ensure that we’re all starting with the same set of code, copy
the text below into a file called <code>gdp_plots.py</code> in the
<code>swc-gapminder</code> folder or download the file from <a href="https://uw-madison-datascience.github.io/python-novice-gapminder-custom/scripts/gdp_plots.py" class="external-link">here</a>.</li>
</ul>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="im">import</span> pandas</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="co"># we need to import part of matplotlib</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="co"># because we are no longer in a notebook</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="co"># load data and transpose so that country names are</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="co"># the columns and their gdp data becomes the rows</span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>data <span class="op">=</span> pandas.read_csv(<span class="st">'data/gapminder_gdp_oceania.csv'</span>, index_col <span class="op">=</span> <span class="st">'country'</span>).T</span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a><span class="co"># create a plot of the transposed data</span></span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a>ax <span class="op">=</span> data.plot()</span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a><span class="co"># display the plot</span></span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a>plt.show()</span></code></pre>
</div>
<p>This program imports the <code>pandas</code> and
<code>matplotlib</code> Python modules, reads some of the gapminder data
into a <code>pandas</code> dataframe, and plots that data using
<code>matplotlib</code> with some default settings.</p>
<p>We can run this program from the command line using</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">$</span> python gdp_plots.py</span></code></pre>
</div>
<p>This is much easier than starting a notebook, going to the browser,
and running each cell in the notebook to get the same result.</p>
<div class="section level3">
<h3 id="initialize-a-repository">Initialize a repository<a class="anchor" aria-label="anchor" href="#initialize-a-repository"></a>
</h3>
<p>But before we modify our <code>gdp_plots.py</code> program, we are
going to put it under version control so that we can track its changes
as we go through this lesson.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> git init</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="ex">$</span> git add gdp_plots.py</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"First commit of analysis script"</span></span></code></pre>
</div>
<p>Because we’re only concerned with changes to our analysis script, we
are going to create a .gitignore file for all of the gapminder
<code>.csv</code> files and any Python notebook files
(<code>.ipynb</code>) files we have created thus far.</p>
<pre><code>$ echo "data/*.csv" &gt; .gitignore
$ echo "*.ipynb" &gt;&gt; .gitignore
$ git add .gitignore
$ git commit -m "Adding ignore file"</code></pre>
<p>Now that we have a clean repository, let’s get back to work on adding
command line arguments to our program.</p>
</div>
</section><section><h2 class="section-heading" id="changing-code-under-version-control">Changing code under Version Control<a class="anchor" aria-label="anchor" href="#changing-code-under-version-control"></a>
</h2>
<hr class="half-width">
<p>As it is, this plot isn’t bad but let’s add some labels for clarity.
We’ll use the data filename as a title for the plot and indicate what
information is in on each axis.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="im">import</span> pandas</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="co"># we need to import part of matplotlib</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="co"># because we are no longer in a notebook</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>filename <span class="op">=</span> <span class="st">'data/gapminder_gdp_oceania.csv'</span></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a><span class="co"># load data and transpose so that country names are</span></span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a><span class="co"># the columns and their gdp data becomes the rows</span></span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a>data <span class="op">=</span> pandas.read_csv(filename, index_col <span class="op">=</span> <span class="st">'country'</span>).T</span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a></span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a><span class="co"># create a plot of the transposed data</span></span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a>ax <span class="op">=</span> data.plot(title <span class="op">=</span> filename)</span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a></span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a><span class="co"># set some plot attributes</span></span>
<span id="cb5-16"><a href="#cb5-16" tabindex="-1"></a>ax.set_xlabel(<span class="st">"Year"</span>)</span>
<span id="cb5-17"><a href="#cb5-17" tabindex="-1"></a>ax.set_ylabel(<span class="st">"GDP Per Capita"</span>)</span>
<span id="cb5-18"><a href="#cb5-18" tabindex="-1"></a><span class="co"># set the x locations and labels</span></span>
<span id="cb5-19"><a href="#cb5-19" tabindex="-1"></a>ax.set_xticks(<span class="bu">range</span>(<span class="bu">len</span>(data.index)))</span>
<span id="cb5-20"><a href="#cb5-20" tabindex="-1"></a>ax.set_xticklabels(data.index, rotation <span class="op">=</span> <span class="dv">45</span>)</span>
<span id="cb5-21"><a href="#cb5-21" tabindex="-1"></a></span>
<span id="cb5-22"><a href="#cb5-22" tabindex="-1"></a><span class="co"># display the plot</span></span>
<span id="cb5-23"><a href="#cb5-23" tabindex="-1"></a>plt.show()</span></code></pre>
</div>
<p>Now when we run this, our plot looks a little bit nicer.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="ex">$</span> python gdp_plots.py</span></code></pre>
</div>
<div class="section level3">
<h3 id="updating-the-repository">Updating the Repository<a class="anchor" aria-label="anchor" href="#updating-the-repository"></a>
</h3>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">$</span> git add gdp_plots.py</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Improving plot format"</span></span></code></pre>
</div>
</div>
</section><section><h2 class="section-heading" id="command-line-arguments">Command-Line Arguments<a class="anchor" aria-label="anchor" href="#command-line-arguments"></a>
</h2>
<hr class="half-width">
<p>This program currently only works for the Oceania set of data. How
might we modify the program to work for any of the gapminder gdp data
sets? We could go into the script and change the <code>.csv</code>
filename to generate the same plot for different sets of data, but there
is an even better way.</p>
<p>Python programs can use additional arguments provided in the
following manner.</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="ex">$</span> python <span class="op">&lt;</span>program<span class="op">&gt;</span> <span class="op">&lt;</span>argument1<span class="op">&gt;</span> <span class="op">&lt;</span>argument2<span class="op">&gt;</span> <span class="op">&lt;</span>other_arguments<span class="op">&gt;</span></span></code></pre>
</div>
<p>The program can then use these arguments to alter its behavior based
on those arguments. In this case, we’ll be using arguments to tell our
program to operate on a specific file.</p>
<p>We’ll be using the <code>sys</code> module to do so. <code>sys</code>
(short for system) is a standard Python module used to store information
about the program and its running environment, including what arguments
were passed to the program when the command was executed. These
arguments are stored as a list in <code>sys.argv</code>.</p>
<p>These arguments can be accessed in our program by importing the
<code>sys</code> module. The first argument in <code>sys.argv</code> is
always the name of the program, so we’ll find any additional arguments
right after that in the list.</p>
<p>Let’s try this out in a separate script. Using the text editor of
your choice, let’s write a new program called <code>args_list.py</code>
containing the two following lines:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'sys.argv is'</span>, sys.argv)</span></code></pre>
</div>
<p>The strange name <code>argv</code> stands for “argument values”.
Whenever Python runs a program, it takes all of the values given on the
command line and puts them in the list <code>sys.argv</code> so that the
program can determine what they were. If we run this program with no
arguments:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="ex">$</span> python argv_list.py</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>sys.argv is ['argv_list.py']</code></pre>
</div>
<p>the only thing in the list is the full path to our script, which is
always <code>sys.argv[0]</code>.</p>
<p>If we run it with a few arguments, however:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="ex">$</span> python argv_list.py first second third</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>sys.argv <span class="kw">is</span> [<span class="st">'argv_list.py'</span>, <span class="st">'first'</span>, <span class="st">'second'</span>, <span class="st">'third'</span>]</span></code></pre>
</div>
<p>then Python adds each of those arguments to that magic list.</p>
<p>Using this new information, let’s add command line arguments to our
<code>gdp_plots.py</code> program.</p>
<p>To do this, we’ll make two changes:</p>
<ol style="list-style-type: decimal">
<li>add the import of the sys module at the beginning of the
program.</li>
<li>replace the filename (“data/gapminder_gdp_oceania.csv”) with the the
second entry in the <code>sys.argv</code> list.</li>
</ol>
<p>Now our program should look as follows:</p>
<pre>
<b>import sys</b>
import pandas
# we need to import part of matplotlib
# because we are no longer in a notebook
import matplotlib.pyplot as plt

<b>filename = sys.argv[1]</b>

# load data and transpose so that country names are
# the columns and their gdp data becomes the rows
data = pandas.read_csv(filename, index_col = 'country').T

# create a plot of the transposed data
ax = data.plot(title = filename)

# set some plot attributes
ax.set_xlabel("Year")
ax.set_ylabel("GDP Per Capita")
# set the x locations and labels
ax.set_xticks(range(len(data.index)) )
ax.set_xticklabels(data.index, rotation = 45)

# display the plot
plt.show()
</pre>
<p>Let’s take a look at what happens when we provide a gapminder
filename to the program.</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="ex">$</span> python gdp_plots.py data/gapminder_gdp_oceania.csv</span></code></pre>
</div>
<p>And the same plot as before is displayed, but this file is now being
read from an argument we’ve provided on the command line. We can now do
this for files with similar information and get the same set of plots
for that data <em>without any changes to our program’s code</em>. Try
this our for yourself now.</p>
<div class="section level3">
<h3 id="update-the-repository">Update the Repository<a class="anchor" aria-label="anchor" href="#update-the-repository"></a>
</h3>
<p>Now that we’ve made this change to our program and see that it works.
Let’s update our repository with these changes.</p>
<pre><code>$ git add gdp_plots.py
$ git commit -m "Adding command line arguments"</code></pre>
<div id="exercise-read-multiple-files" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-read-multiple-files" class="callout-inner">
<h3 class="callout-title">Exercise: read multiple files</h3>
<div class="callout-content">
<p>Try to run the gdp_plots.py so that it reads in all the .csv files in
the data folder using the wildcard symbol. Does it work? Why or why
not?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>if you run it with the argument ‘data/*.csv’ you get an error on the
Americas file because it has an extra file. However, it works if you
omit that file.</p>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>The <code>sys</code> library connects a Python program to the system
it is running on.</li>
<li>The variable <code>sys.argv</code> is a list with each item being a
command-line argument.</li>
</ul>
</div>
</div>
</div>
</div>
</section></section><section id="aio-31-multi-files"><p>Content from <a href="31-multi-files.html">Trying Different Methods</a></p>
<hr>
<p>Last updated on 2025-07-15 |

        <a href="https://github.com/carpentries-incubator/swc-ext-python/edit/main/episodes/31-multi-files.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do I plot multiple data sets using different methods?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Read data from standard input in a program so that it can be used in
a pipeline.</li>
<li>Compare using different methods to accomplish the same task.</li>
<li>Practice making branches and merging in a Git repository.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="handling-multiple-files">Handling Multiple Files<a class="anchor" aria-label="anchor" href="#handling-multiple-files"></a>
</h2>
<hr class="half-width">
<p>Perhaps we would like a script that can operate on multiple data
files at once. This can actually be done in two different ways: (1)
writing a bash script that calls our already-existing Python script in a
for-loop, or (2) modifying our Python script to read multiple files in a
for-loop. We will try both methods and compare the two.</p>
<div class="section level3">
<h3 id="create-new-branches">Create New Branches<a class="anchor" aria-label="anchor" href="#create-new-branches"></a>
</h3>
<p>First we will create two new branches where we can develop each of
these two different methods. We will call these branches
<code>python-multi-files</code> and <code>bash-multi-files</code></p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> git branch python-multi-files</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="ex">$</span> git branch bash-multi-files</span></code></pre>
</div>
<p>We can check that these two branches were created with
<code>$ git branch -a</code>.</p>
</div>
</section><section><h2 class="section-heading" id="handling-multiple-files-with-python">Handling Multiple Files with Python<a class="anchor" aria-label="anchor" href="#handling-multiple-files-with-python"></a>
</h2>
<hr class="half-width">
<p>First, we’ll try using just Python to loop through mutliple files.
Let’s switch to our Python branch.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>$ git checkout python<span class="op">-</span>multi<span class="op">-</span>files</span></code></pre>
</div>
<p>To process each file separately, we’ll need a loop that executes our
plotting statements for each file.</p>
<p>We want our program to process each file separately, and the easiest
way to do this is a loop that executes once for each of the filenames
provided in <code>sys.argv</code>.</p>
<p>But we need to be careful: <code>sys.argv[0]</code> will always be
the name of our program, rather than the name of a file. We also need to
handle an unknown number of filenames, since our program could be run
for any number of files.</p>
<p>A solution is to loop over the contents of <code>sys.argv[1:]</code>.
The ‘1’ tells Python to start the slice at location 1, so the program’s
name isn’t included. Since we’ve left off the upper bound, the slice
runs to the end of the list, and includes all the filenames.</p>
<p>Here is our updated program.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="im">import</span> pandas</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="co"># we need to import part of matplotlib</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="co"># because we are no longer in a notebook</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a><span class="cf">for</span> filename <span class="kw">in</span> sys.argv[<span class="dv">1</span>:]: <span class="co"># &lt;= this is the line that is changing</span></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a>    <span class="co"># load data and transpose so that country names are</span></span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a>    <span class="co"># the columns and their gdp data becomes the rows</span></span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a>    data <span class="op">=</span> pandas.read_csv(filename, index_col <span class="op">=</span> <span class="st">'country'</span>).T</span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a></span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a>    <span class="co"># create a plot of the transposed data</span></span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a>    ax <span class="op">=</span> data.plot(title <span class="op">=</span> filename)</span>
<span id="cb3-15"><a href="#cb3-15" tabindex="-1"></a></span>
<span id="cb3-16"><a href="#cb3-16" tabindex="-1"></a>    <span class="co"># set some plot attributes</span></span>
<span id="cb3-17"><a href="#cb3-17" tabindex="-1"></a>    ax.set_xlabel(<span class="st">"Year"</span>)</span>
<span id="cb3-18"><a href="#cb3-18" tabindex="-1"></a>    ax.set_ylabel(<span class="st">"GDP Per Capita"</span>)</span>
<span id="cb3-19"><a href="#cb3-19" tabindex="-1"></a>    <span class="co"># set the x locations and labels</span></span>
<span id="cb3-20"><a href="#cb3-20" tabindex="-1"></a>    ax.set_xticks(<span class="bu">range</span>(<span class="bu">len</span>(data.index)))</span>
<span id="cb3-21"><a href="#cb3-21" tabindex="-1"></a>    ax.set_xticklabels(data.index, rotation <span class="op">=</span> <span class="dv">45</span>)</span>
<span id="cb3-22"><a href="#cb3-22" tabindex="-1"></a></span>
<span id="cb3-23"><a href="#cb3-23" tabindex="-1"></a>    <span class="co"># display the plot</span></span>
<span id="cb3-24"><a href="#cb3-24" tabindex="-1"></a>    plt.show()</span></code></pre>
</div>
<p>Now when the program is given multiple filenames</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="ex">$</span> python gdp_plots.py data/gapminder_gdp_oceania.csv data/gapminder_gdp_africa.csv</span></code></pre>
</div>
<p>one plot for each filename is generated.</p>
<div class="section level4">
<h4 id="update-the-repository">Update the Repository<a class="anchor" aria-label="anchor" href="#update-the-repository"></a>
</h4>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>$ git add gdp_plots.py</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>$ git commit <span class="op">-</span>m <span class="st">"Allowing plot generation for multiple files at once"</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="saving-figures">Saving Figures<a class="anchor" aria-label="anchor" href="#saving-figures"></a>
</h3>
<p>By using <code>plt.show()</code> with multiple files, the program
stops each time a figure is generated and the user must exit it to
continue. To avoid this slow down, we can replace this with
<code>plt.savefig()</code> and view all the figures after the script
finishes. This function has one required argument which is the filename
to save the figure as. The filename must have a valid image extension
(eg. PNG, JPEG, etc.).</p>
<p>Let’s replace our <code>plt.show()</code> with
<code>plt.savefig('fig/gdp-plot.png')</code>. First, create the
<code>fig</code> directory using <code>mkdir</code> Our new script
should like like this:</p>
<pre>
import sys
import pandas
# we need to import part of matplotlib
# because we are no longer in a notebook
import matplotlib.pyplot as plt

for filename in sys.argv[1:]:

    # load data and transpose so that country names are
    # the columns and their gdp data becomes the rows
    data = pandas.read_csv(filename, index_col = 'country').T

    # create a plot of the transposed data
    ax = data.plot(title = filename)

    # set some plot attributes
    ax.set_xlabel("Year")
    ax.set_ylabel("GDP Per Capita")
    # set the x locations and labels
    ax.set_xticks(range(len(data.index)))
    ax.set_xticklabels(data.index, rotation = 45)

    # save the plot
    <b>plt.savefig('fig/gdp-plot.png')</b>
</pre>
<p>If we look at the contents of our folder now, we should have a new
file called <code>gdp-plot.png</code>. But why is there only one when we
supplied multiple data files? This is because each time the plot is
created, it is being saved as the same file name and overwriting the
previous plot.</p>
<p>We can fix this by creating a unique file name each time. A simple
unique name can be used based on the original file name. We can use
Python’s <code>split()</code> function to split <code>filename</code>,
which is a string, by any character. This returns a list like so:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>name <span class="op">=</span> <span class="st">'my-data.csv'</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>split_name <span class="op">=</span> name.split(<span class="st">'.'</span>)</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="bu">print</span>(split_name)</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="bu">print</span>(split_name[<span class="dv">0</span>])</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>[<span class="st">'my-data'</span>, <span class="st">'csv'</span>]</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="co">'my-data'</span></span></code></pre>
</div>
<p>We’ll split the original file name and use the first part to rename
our plot. And then we will concatenate <code>.png</code> to the name to
specify our file type.</p>
<pre>
import sys
import pandas
# we need to import part of matplotlib
# because we are no longer in a notebook
import matplotlib.pyplot as plt

for filename in sys.argv[1:]:
    # load data and transpose so that country names are
    # the columns and their gdp data becomes the rows
    data = pandas.read_csv(filename, index_col = 'country').T

    # create a plot of the transposed data
    ax = data.plot(title = filename)

    # set some plot attributes
    ax.set_xlabel("Year")
    ax.set_ylabel("GDP Per Capita")
    # set the x locations and labels
    ax.set_xticks(range(len(data.index)))
    ax.set_xticklabels(data.index, rotation = 45)

    # save the plot with a unique file name
    split_name1 = filename.split('.')[0] #data/gapminder_gdp_XXX
    split_name2 = split_name1.split('/')[1]
    save_name = 'figs/'+split_name2 + '.png'
    plt.savefig(save_name)
</pre>
</div>
<div class="section level3">
<h3 id="updating-the-repository">Updating the repository<a class="anchor" aria-label="anchor" href="#updating-the-repository"></a>
</h3>
<p>Yet another successful update to the code. Let’s commit our changes.
If we do <code>git status</code> we see we also have image files
untracked. Let’s ignore those files because they will likely change as
our data changes.</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="ex">$</span> echo <span class="st">"*.png"</span> <span class="op">&gt;&gt;</span> .gitignore</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="ex">$</span> git add .gitignore</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"ignoring generated images"</span></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a><span class="ex">$</span> git add gdp_plots.py</span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Saves each figure as a separate file."</span></span></code></pre>
</div>
</div>
</section><section><h2 class="section-heading" id="handling-multiple-files-with-bash">Handling Multiple Files with Bash<a class="anchor" aria-label="anchor" href="#handling-multiple-files-with-bash"></a>
</h2>
<hr class="half-width">
<p>Now that we’ve created a Python script to save multiple files at
once, let’s try to do the same thing in Bash. We’ll leave our current
branch alone and switch to our <code>bash-multi-files</code> branch.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="ex">$</span> git checkout bash-multi-files</span></code></pre>
</div>
<p>If we look at our <code>gdp_plots.py</code> file, it is not in a
for-loop format because it is not up to date with other branch. Our
script should look like this:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="im">import</span> pandas</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="co"># we need to import part of matplotlib</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="co"># because we are no longer in a notebook</span></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a></span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a>filename <span class="op">=</span> sys.argv[<span class="dv">1</span>]</span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a></span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a><span class="co"># load data and transpose so that country names are</span></span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a><span class="co"># the columns and their gdp data becomes the rows</span></span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a>data <span class="op">=</span> pandas.read_csv(filename, index_col <span class="op">=</span> <span class="st">'country'</span>).T</span>
<span id="cb10-12"><a href="#cb10-12" tabindex="-1"></a></span>
<span id="cb10-13"><a href="#cb10-13" tabindex="-1"></a><span class="co"># create a plot the transposed data</span></span>
<span id="cb10-14"><a href="#cb10-14" tabindex="-1"></a>ax <span class="op">=</span> data.plot(title <span class="op">=</span> filename)</span>
<span id="cb10-15"><a href="#cb10-15" tabindex="-1"></a></span>
<span id="cb10-16"><a href="#cb10-16" tabindex="-1"></a><span class="co"># set some plot attributes</span></span>
<span id="cb10-17"><a href="#cb10-17" tabindex="-1"></a>ax.set_xlabel(<span class="st">"Year"</span>)</span>
<span id="cb10-18"><a href="#cb10-18" tabindex="-1"></a>ax.set_ylabel(<span class="st">"GDP Per Capita"</span>)</span>
<span id="cb10-19"><a href="#cb10-19" tabindex="-1"></a><span class="co"># set the x locations and labels</span></span>
<span id="cb10-20"><a href="#cb10-20" tabindex="-1"></a>ax.set_xticks(<span class="bu">range</span>(<span class="bu">len</span>(data.index)))</span>
<span id="cb10-21"><a href="#cb10-21" tabindex="-1"></a>ax.set_xticklabels(data.index, rotation <span class="op">=</span> <span class="dv">45</span>)</span>
<span id="cb10-22"><a href="#cb10-22" tabindex="-1"></a></span>
<span id="cb10-23"><a href="#cb10-23" tabindex="-1"></a><span class="co"># display the plot</span></span>
<span id="cb10-24"><a href="#cb10-24" tabindex="-1"></a>plt.show()</span></code></pre>
</div>
<p>Let’s use bash to generate multiple plots by calling our Python
script in a bash for-loop. First, let’s create a bash file for us to
edit.</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">$</span> touch gdp_plots.sh</span></code></pre>
</div>
<p>In this script, we’ll write a for-loop will call our
<code>gdp_plots.py</code> script on multiple files. We can break up our
long list of files by using a backslash <code>\</code> and writing the
rest on the next line.</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="cf">for</span> filename <span class="kw">in</span> data/gapminder_gdp_oceania.csv data/gapminder_gdp_africa.csv</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>   <span class="ex">python</span> gdp_plots.py <span class="va">$filename</span></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a><span class="cf">done</span></span></code></pre>
</div>
<p>We can run our script to see if it works:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>$ bash gdp_plots.sh</span></code></pre>
</div>
<p>When we run this, we see that it stops to show us each plot like
before. Let’s update our script to save the figure like before.</p>
<pre>
import sys
import pandas
# we need to import part of matplotlib
# because we are no longer in a notebook
import matplotlib.pyplot as plt

filename = sys.argv[1]

# load data and transpose so that country names are
# the columns and their gdp data becomes the rows
data = pandas.read_csv(filename, index_col = 'country').T

# create a plot the transposed data
ax = data.plot(title = filename)

# set some plot attributes
ax.set_xlabel("Year")
ax.set_ylabel("GDP Per Capita")
# set the x locations and labels
ax.set_xticks(range(len(data.index)))
ax.set_xticklabels(data.index, rotation = 45)

<b># save the plot with a unique file name
split_name1 = filename.split('.')[0] #data/gapminder_gdp_XXX
split_name2 = split_name1.split('/')[1]
save_name = 'figs/'+split_name2 + '.png'
plt.savefig(save_name)</b>
</pre>
<p>When we run the script again, we should have new image files
generated.</p>
<div class="section level3">
<h3 id="updating-the-repository-1">Updating the repository<a class="anchor" aria-label="anchor" href="#updating-the-repository-1"></a>
</h3>
<p>Yet another successful update to the code. Let’s commit our changes.
Since our Python and bash scripts had somewhat unrelated changes, let’s
make two separate commits. We will also ignore our images like
before.</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="ex">$</span> git add gdp_plots.sh</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Wrote bash script to call python plotter."</span></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="ex">$</span> git add gdp_plots.py</span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Saves figures with unique name."</span></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a><span class="ex">$</span> echo <span class="st">"*.png"</span> <span class="op">&gt;&gt;</span> .gitignore</span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a><span class="ex">$</span> git add .gitignore</span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"ignoring generated images"</span></span></code></pre>
</div>
</div>
</section><section><h2 class="section-heading" id="comparing-methods">Comparing Methods<a class="anchor" aria-label="anchor" href="#comparing-methods"></a>
</h2>
<hr class="half-width">
<p>We have successfully developed two different methods for
accomplishing the same task. This is common to do in software
development when there is not a clear path forward. Let’s compare our
two methods and decide which to merge into our <code>master</code>
branch.</p>
<p>One comparison we might be interested in is how fast each is. We can
use bash’s <code>time</code> function to get the time to run the script.
Let’s time each script. To do this, we just add <code>time</code> before
each command when we run a script or command and it will give us timing
information when it is completed.</p>
<p>While we are on our bash branch, we’ll time that script first.</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="ex">$</span> time bash gdp_plots.sh</span></code></pre>
</div>
<pre><code>real    0m6.031s
user    0m5.535s
sys     0m0.388s</code></pre>
<p>We are most interested in the “real” time in the output, which is the
elapsed time we experience.</p>
<p>Let’s checkout our python branch and time our script there.</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="ex">$</span> git checkout python-multi-files</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="ex">$</span> time python gdp_plots.py data/gapminder_gdp_oceania.csv data/gapminder_gdp_africa.csv</span></code></pre>
</div>
<pre><code>real    0m3.163s
user    0m3.002s
sys     0m0.132s</code></pre>
<p>As we can see, our Python method ran faster than the bash method. For
this reason, we will merge our Python branch into master.</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="ex">$</span> git checkout master</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="ex">$</span> git merge python-multi-files</span></code></pre>
</div>
<p>Another advantage to the Python method over the bash method is that
we do not need to change a file and commit it each time we want to
create plots from different data.</p>
</section><section><h2 class="section-heading" id="more-practice-with-multiple-files-in-python">More Practice with Multiple Files in Python<a class="anchor" aria-label="anchor" href="#more-practice-with-multiple-files-in-python"></a>
</h2>
<hr class="half-width">
<div id="finding-particular-files" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="finding-particular-files" class="callout-inner">
<h3 class="callout-title">Finding Particular Files</h3>
<div class="callout-content">
<p>Using the <code>glob</code> module, write a simple version of
<code>ls</code> that shows files in the current directory with a
particular suffix. A call to this script should look like this:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a>$ python my_ls.py py</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">left.py</span></span>
<span><span class="va">right.py</span></span>
<span><span class="va">zero.py</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a><span class="im">import</span> glob</span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a><span class="kw">def</span> main():</span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a>    <span class="co">'''prints names of all files with sys.argv as suffix'''</span></span>
<span id="cb22-6"><a href="#cb22-6" tabindex="-1"></a>    <span class="cf">assert</span> <span class="bu">len</span>(sys.argv) <span class="op">&gt;=</span> <span class="dv">2</span>, <span class="st">'Argument list cannot be empty'</span></span>
<span id="cb22-7"><a href="#cb22-7" tabindex="-1"></a>    suffix <span class="op">=</span> sys.argv[<span class="dv">1</span>] <span class="co"># NB: behaviour is not as you'd expect if sys.argv[1] is *</span></span>
<span id="cb22-8"><a href="#cb22-8" tabindex="-1"></a>    glob_input <span class="op">=</span> <span class="st">'*.'</span> <span class="op">+</span> suffix <span class="co"># construct the input</span></span>
<span id="cb22-9"><a href="#cb22-9" tabindex="-1"></a>    glob_output <span class="op">=</span> <span class="bu">sorted</span>(glob.glob(glob_input)) <span class="co"># call the glob function</span></span>
<span id="cb22-10"><a href="#cb22-10" tabindex="-1"></a>    <span class="cf">for</span> item <span class="kw">in</span> glob_output: <span class="co"># print the output</span></span>
<span id="cb22-11"><a href="#cb22-11" tabindex="-1"></a>        <span class="bu">print</span>(item)</span>
<span id="cb22-12"><a href="#cb22-12" tabindex="-1"></a>    <span class="cf">return</span></span>
<span id="cb22-13"><a href="#cb22-13" tabindex="-1"></a></span>
<span id="cb22-14"><a href="#cb22-14" tabindex="-1"></a>main()</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="counting-lines" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="counting-lines" class="callout-inner">
<h3 class="callout-title">Counting Lines</h3>
<div class="callout-content">
<p>Write a program called <code>line_count.py</code> that works like the
Unix <code>wc</code> command:</p>
<ul>
<li>If no filenames are given, it reports the number of lines in
standard input.</li>
<li>If one or more filenames are given, it reports the number of lines
in each, followed by the total number of lines.</li>
</ul>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a><span class="kw">def</span> main():</span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a>    <span class="co">'''print each input filename and the number of lines in it,</span></span>
<span id="cb23-5"><a href="#cb23-5" tabindex="-1"></a><span class="co">       and print the sum of the number of lines'''</span></span>
<span id="cb23-6"><a href="#cb23-6" tabindex="-1"></a>    filenames <span class="op">=</span> sys.argv[<span class="dv">1</span>:]</span>
<span id="cb23-7"><a href="#cb23-7" tabindex="-1"></a>    sum_nlines <span class="op">=</span> <span class="dv">0</span> <span class="co">#initialize counting variable</span></span>
<span id="cb23-8"><a href="#cb23-8" tabindex="-1"></a></span>
<span id="cb23-9"><a href="#cb23-9" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(filenames) <span class="op">==</span> <span class="dv">0</span>: <span class="co"># no filenames, just stdin</span></span>
<span id="cb23-10"><a href="#cb23-10" tabindex="-1"></a>        sum_nlines <span class="op">=</span> count_file_like(sys.stdin)</span>
<span id="cb23-11"><a href="#cb23-11" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">'stdin: </span><span class="sc">%d</span><span class="st">'</span> <span class="op">%</span> sum_nlines)</span>
<span id="cb23-12"><a href="#cb23-12" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb23-13"><a href="#cb23-13" tabindex="-1"></a>        <span class="cf">for</span> f <span class="kw">in</span> filenames:</span>
<span id="cb23-14"><a href="#cb23-14" tabindex="-1"></a>            n <span class="op">=</span> count_file(f)</span>
<span id="cb23-15"><a href="#cb23-15" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">'</span><span class="sc">%s</span><span class="st"> </span><span class="sc">%d</span><span class="st">'</span> <span class="op">%</span> (f, n))</span>
<span id="cb23-16"><a href="#cb23-16" tabindex="-1"></a>            sum_nlines <span class="op">+=</span> n</span>
<span id="cb23-17"><a href="#cb23-17" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">'total: </span><span class="sc">%d</span><span class="st">'</span> <span class="op">%</span> sum_nlines)</span>
<span id="cb23-18"><a href="#cb23-18" tabindex="-1"></a></span>
<span id="cb23-19"><a href="#cb23-19" tabindex="-1"></a><span class="kw">def</span> count_file(filename):</span>
<span id="cb23-20"><a href="#cb23-20" tabindex="-1"></a>    <span class="co">'''count the number of lines in a file'''</span></span>
<span id="cb23-21"><a href="#cb23-21" tabindex="-1"></a>    f <span class="op">=</span> <span class="bu">open</span>(filename,<span class="st">'r'</span>)</span>
<span id="cb23-22"><a href="#cb23-22" tabindex="-1"></a>    nlines <span class="op">=</span> <span class="bu">len</span>(f.readlines())</span>
<span id="cb23-23"><a href="#cb23-23" tabindex="-1"></a>    f.close()</span>
<span id="cb23-24"><a href="#cb23-24" tabindex="-1"></a>    <span class="cf">return</span>(nlines)</span>
<span id="cb23-25"><a href="#cb23-25" tabindex="-1"></a></span>
<span id="cb23-26"><a href="#cb23-26" tabindex="-1"></a><span class="kw">def</span> count_file_like(file_like):</span>
<span id="cb23-27"><a href="#cb23-27" tabindex="-1"></a>    <span class="co">'''count the number of lines in a file-like object (eg stdin)'''</span></span>
<span id="cb23-28"><a href="#cb23-28" tabindex="-1"></a>    n <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb23-29"><a href="#cb23-29" tabindex="-1"></a>    <span class="cf">for</span> line <span class="kw">in</span> file_like:</span>
<span id="cb23-30"><a href="#cb23-30" tabindex="-1"></a>        n <span class="op">=</span> n<span class="op">+</span><span class="dv">1</span></span>
<span id="cb23-31"><a href="#cb23-31" tabindex="-1"></a>    <span class="cf">return</span> n</span>
<span id="cb23-32"><a href="#cb23-32" tabindex="-1"></a></span>
<span id="cb23-33"><a href="#cb23-33" tabindex="-1"></a>main()</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>Make different branches in a Git repository to try different
methods.</li>
<li>Use bash’s <code>time</code> command to time scripts.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-32a-flags"><p>Content from <a href="32a-flags.html">Program Flags</a></p>
<hr>
<p>Last updated on 2025-01-27 |

        <a href="https://github.com/carpentries-incubator/swc-ext-python/edit/main/episodes/32a-flags.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I make an easy shortcut to analyze all files at once using a
program flag?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Handle flags and files separately in a command-line program.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="handling-program-flags">Handling Program Flags<a class="anchor" aria-label="anchor" href="#handling-program-flags"></a>
</h2>
<hr class="half-width">
<p>Now we have a program which is capable of handling any number of data
sets at once.</p>
<p>But what if we have 50 GDP data sets? It would be awfully tedious to
type in the names of 50 files in the command line, so let’s add a flag
to our program indicating that we would like it to generate a plot for
each data set in the current directory.</p>
<p>Flags are a convention used in programming to indicate to a program
that a non-default behavior is being requested by the user. In this
case, we’ll be using a “-a” flag to indicate to our program we would
like it to operate on all data sets in our directory.</p>
<p>To explore what files are in the current directory, we’ll be using
the Python’s <code>glob</code> module.</p>
<ul>
<li>In Unix, the term “globbing” means “matching a set of files with a
pattern”.</li>
<li>The most common patterns are:
<ul>
<li>
<code>*</code> meaning “match zero or more characters”</li>
<li>
<code>?</code> meaning “match exactly one character”</li>
</ul>
</li>
<li>Python contains the <code>glob</code> library to provide pattern
matching functionality</li>
<li>The <code>glob</code> library contains a function also called
<code>glob</code> to match file patterns</li>
<li>E.g., <code>glob.glob('*.txt')</code> matches all files in the
current directory whose names end with <code>.txt</code>.</li>
<li>Result is a (possibly empty) list of character strings.</li>
</ul>
<pre>
import sys
<b>import glob</b>
import pandas
# we need to import part of matplotlib
# because we are no longer in a notebook
import matplotlib.pyplot as plt

<b># check for -a flag in arguments
if "-a" in sys.argv:
    filenames = glob.glob("data/*gdp*.csv")
else:
    filenames = sys.argv[1:]

for filename in filenames:</b>

    # load data and transpose so that country names are
    # the columns and their gdp data becomes the rows
    data = pandas.read_csv(filename, index_col = 'country').T

    # create a plot of the transposed data
    ax = data.plot(title = filename)

    # set some plot attributes
    ax.set_xlabel("Year")
    ax.set_ylabel("GDP Per Capita")
    # set the x locations and labels
    ax.set_xticks(range(len(data.index)))
    ax.set_xticklabels(data.index, rotation = 45)

    # save the plot with a unique file name
    split_name1 = filename.split('.')[0] #data/gapminder_gdp_XXX
    split_name2 = filename.split('/')[1]
    save_name = 'figs/'+split_name2 + '.png'
    plt.savefig(save_name)
</pre>
<div class="section level3">
<h3 id="updating-the-repository">Updating the repository<a class="anchor" aria-label="anchor" href="#updating-the-repository"></a>
</h3>
<p>Yet another successful update to the code. Let’s commit our
changes.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> git add gdp_plots.py</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Adding a flag to run script for all gdp data sets."</span></span></code></pre>
</div>
<div id="the-right-way-to-do-it" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="the-right-way-to-do-it" class="callout-inner">
<h3 class="callout-title">The Right Way to Do It</h3>
<div class="callout-content">
<p>If our programs can take complex parameters or multiple filenames, we
shouldn’t handle <code>sys.argv</code> directly. Instead, we should use
Python’s <code>argparse</code> library, which handles common cases in a
systematic way, and also makes it easy for us to provide sensible error
messages for our users. We will not cover this module in this lesson but
you can go to Tshepang Lekhonkhobe’s <a href="https://docs.python.org/dev/howto/argparse.html" class="external-link">Argparse
tutorial</a> that is part of Python’s Official Documentation.</p>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>Adding command line flags can be a user-friendly way to accomplish
common tasks.</li>
</ul>
</div>
</div>
</div>
</div>
</section></section><section id="aio-32b-defensive-prog"><p>Content from <a href="32b-defensive-prog.html">Defensive Programming</a></p>
<hr>
<p>Last updated on 2025-01-27 |

        <a href="https://github.com/carpentries-incubator/swc-ext-python/edit/main/episodes/32b-defensive-prog.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do I predict and avoid user confusion?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Ensure that programs indicate use and provide meaningful output upon
failure.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="defensive-programming">Defensive Programming<a class="anchor" aria-label="anchor" href="#defensive-programming"></a>
</h2>
<hr class="half-width">
<p>In our last lesson, we created a program which will plot our
gapminder gdp data for an arbitrary number of files. This is great, but
we didn’t cover some of the vulnerabilities of this program we’ve
created.</p>
<ul>
<li>What happens if we run the program without any arguments at
all?</li>
<li>What happens if we run the program from another directory?</li>
</ul>
<p>First, let’s try running our program without any additional arguments
or flags.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> python gdp_plots.py</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Traceback (most recent call last):
  File "gdp_plot.py", line 12, in &lt;module&gt;
    filenames = sys.argv[1:]
IndexError: list index out of range</code></pre>
</div>
<p>Python returns an error when trying to find the command line argument
in <code>sys.argv</code>. It cannot find that argument because we
haven’t provided it to the command and as a result there is no entry in
<code>sys.argv</code> where we’re telling it to look for this value. We
may know all of this because we’re the ones who wrote the program, but
another user of the program without this experience will not.</p>
<div id="more-on-function-errorsexceptions" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="more-on-function-errorsexceptions" class="callout-inner">
<h3 class="callout-title">More on Function Errors/Exceptions</h3>
<div class="callout-content">
<p>Python reports a <strong>runtime error</strong> when something goes
wrong while a program is executing.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>age <span class="op">=</span> <span class="dv">53</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>remaining <span class="op">=</span> <span class="dv">100</span> <span class="op">-</span> aege <span class="co"># mis-spelled 'age'</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>NameError: name 'aege' is not defined</code></pre>
</div>
<ul>
<li>The message indicates a problem with the name of a variable</li>
</ul>
<p>Python also reports a <strong>syntax error</strong> when it can’t
understand the source of a program.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"hello world"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>  File "&lt;ipython-input-6-d1cc229bf815&gt;", line 1
    print ("hello world"
                        ^
SyntaxError: unexpected EOF while parsing</code></pre>
</div>
<ul>
<li>The message indicates a problem on first line of the input (“line
1”).
<ul>
<li>In this case the “ipython-input” section of the file name tells us
that we are working with input into IPython, the Python interpreter used
by the Jupyter Notebook.</li>
</ul>
</li>
<li>The <code>-6-</code> part of the filename indicates that the error
occurred in cell 6 of our Notebook.</li>
<li>Next is the problematic line of code, indicating the problem with a
<code>^</code> pointer.</li>
</ul>
</div>
</div>
</div>
<p>And if we run the program from another directory:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>$ cd ..</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>$ python swc<span class="op">-</span>gapminder<span class="op">/</span>gdp_plots.py <span class="op">-</span>a</span></code></pre>
</div>
<p>We see no output from the program at all. This is what is referred to
as a “silent failure”. The program has failed to produce a plot, but has
reported no reason why. These kind of failures are difficult to debug
and should be avoided.</p>
<p>It is important to employ “defensive programming” in this scenario so
that our program indicates to the user</p>
<ol style="list-style-type: decimal">
<li>what is going wrong</li>
<li>how to correct this problem</li>
</ol>
<div class="section level3">
<h3 id="check-input-arguments">Check Input Arguments<a class="anchor" aria-label="anchor" href="#check-input-arguments"></a>
</h3>
<p>Let’s add a section to the code which checks the number of incoming
arguments to the program and returns some information to the user if
there is missing information.</p>
<pre>
import sys
import glob
import pandas
# we need to import part of matplotlib
# because we are no longer in a notebook
import matplotlib.pyplot as plt

# make sure additional arguments or flags have
# been provided by the user
<b>if len(sys.argv) == 1:
    # why the program will not continue
    print("Not enough arguments have been provided")
    # how this can be corrected
    print("Usage: python gdp_plots.py ")
    print("Options:")
    print("-a : plot all gdp data sets in current directory")</b>

# check for -a flag in arguments
if "-a" in sys.argv:
    filenames = glob.glob("data/*gdp*.csv")
else:
    filenames = sys.argv[1:]

for filename in filenames:

    # load data and transpose so that country names are
    # the columns and their gdp data becomes the rows
    data = pandas.read_csv(filename, index_col = 'country').T

    # create a plot of the transposed data
    ax = data.plot(title = filename)

    # set some plot attributes
    ax.set_xlabel("Year")
    ax.set_ylabel("GDP Per Capita")
    # set the x locations and labels
    ax.set_xticks(range(len(data.index)))
    ax.set_xticklabels(data.index, rotation = 45)

    # save the plot with a unique file name
    split_name = filename.split('.')
    save_name = split_name[0] + '.png'
    plt.savefig(save_name)
</pre>
<p>If we run the program without a filename argument, here’s what we’ll
see</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>$ python gdp_plots.py</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Not enough arguments have been provided
Usage: python gdp_plots.py &lt;filenames&gt;
Options:
-a : plot all gdp file in current directory</code></pre>
</div>
<p>Now if someone runs this program without having used it before (or
written it themselves) the user will know how change their command to
get the program running properly, rather than seeing an esoteric Python
error.</p>
</div>
<div class="section level3">
<h3 id="update-the-repository">Update the Repository<a class="anchor" aria-label="anchor" href="#update-the-repository"></a>
</h3>
<p>We’ve just made another successful change to our repository. Let’s
add a commit to the repo.</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>$ git add gdp_plots.py</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>$ git commit <span class="op">-</span>m <span class="st">"Handling case for missing filename argument"</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="check-for-silent-errors">Check for silent errors<a class="anchor" aria-label="anchor" href="#check-for-silent-errors"></a>
</h3>
<p>Silent errors can be difficult to anticipate. If we try to run our
program from another directory with the <code>-a</code> flag, we don’t
see any errors, but it also doesn’t do anything. This is because when we
do the <code>-a</code> flag here, there are no <code>.csv</code> files
in the directory, so our <code>filenames</code> variable is empty. Let’s
add a check to ensure there are files to plot.</p>
<pre>
import sys
import glob
import pandas
# we need to import part of matplotlib
# because we are no longer in a notebook
import matplotlib.pyplot as plt

# make sure additional arguments or flags have
# been provided by the user
if len(sys.argv) == 1:
    # why the program will not continue
    print("Not enough arguments have been provided")
    # how this can be corrected
    print("Usage: python gdp_plots.py ")
    print("Options:")
    print("-a : plot all gdp data sets in current directory")

# check for -a flag in arguments
if "-a" in sys.argv:
    filenames = glob.glob("data/*gdp*.csv")
    # check if no files were found and print message.
    <b>if filenames == []:
        # file list is empty (no files found)
        print("No files found in this folder.")
        print("Make sure data is located in current directory.")</b>
else:
    filenames = sys.argv[1:]

for filename in filenames:

    # load data and transpose so that country names are
    # the columns and their gdp data becomes the rows
    data = pandas.read_csv(filename, index_col = 'country').T

    # create a plot of the transposed data
    ax = data.plot(title = filename)

    # set some plot attributes
    ax.set_xlabel("Year")
    ax.set_ylabel("GDP Per Capita")
    # set the x locations and labels
    ax.set_xticks(range(len(data.index)))
    ax.set_xticklabels(data.index, rotation = 45)

    # save the plot with a unique file name
    split_name = filename.split('.')
    save_name = split_name[0] + '.png'
    plt.savefig(save_name)
</pre>
<p>Now if someone runs this program in a directory with no valid
datafiles, a message appears.</p>
</div>
<div class="section level3">
<h3 id="update-the-repository-1">Update the Repository<a class="anchor" aria-label="anchor" href="#update-the-repository-1"></a>
</h3>
<p>We’ve just made another successful change to our repository. Let’s
add a commit to the repo.</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">$</span> git add gdp_plots.py</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Handling case if no files present in directory"</span></span></code></pre>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>Avoid silent failures.</li>
<li>Avoid esoteric output when a program fails.</li>
<li>Add checkpoints in code to check for common failures.</li>
</ul>
</div>
</div>
</div>
</div>
</section></section><section id="aio-33-refactoring"><p>Content from <a href="33-refactoring.html">Refactoring</a></p>
<hr>
<p>Last updated on 2025-01-27 |

        <a href="https://github.com/carpentries-incubator/swc-ext-python/edit/main/episodes/33-refactoring.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>When should I reorganize my code so it is more clear and readable
for others?</li>
<li>How can I organize my code so that it is useable in other
places?</li>
<li>Why do I almost always want to write my code as though it will be
used somewhere else?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Understand the value of refactoring code and use of functions.</li>
<li>Practice determining where code can be divided into smaller
functions.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>This code works nicely for generating plots of multiple data sets,
but there is now a lot of code to digest in our script. Picture yourself
looking at this code for the first time. Would it be immediately clear
to you where are arguments are handled and where plots are
generated?</p>
<p>It would be nice to break this work into clear chunks of code. This
can be accomplished by making the argument checking section and the body
of the for loop their own functions. This requires surprisingly few
changes to the code, but makes it much more clear. This process is
called <strong>refactoring</strong>.</p>
<div id="exercise-make-a-refactoring-plan" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-make-a-refactoring-plan" class="callout-inner">
<h3 class="callout-title">Exercise: make a refactoring plan</h3>
<div class="callout-content">
<p>Given the guidance above, talk with your neighbors about which parts
of the script should be moved into functions. Try to think of ways to
make the functions the most reusable on their own.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>A possible solution:</p>
<ol style="list-style-type: decimal">
<li>A function that parses the arguments</li>
<li>A function that makes the plots</li>
<li>A function that calls the other functions</li>
</ol>
<p>This isn’t the only “right” solution, but a reasonable way to split
things up</p>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="lets-refactor-our-script">Let’s refactor our script<a class="anchor" aria-label="anchor" href="#lets-refactor-our-script"></a>
</h2>
<hr class="half-width">
<div class="section level3">
<h3 id="create-a-branch">Create a Branch<a class="anchor" aria-label="anchor" href="#create-a-branch"></a>
</h3>
<p>Because we’re making a major change, let’s make a new branch to work
in.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> git checkout <span class="at">-b</span> refactor</span></code></pre>
</div>
<p>Let’s break the code into 4 functions:</p>
<ul>
<li>
<code>parse_arguments()</code> - gets the input from argv[], returns
a list of file names</li>
<li>
<code>create_plot()</code> - takes one file name as input, creates
one plot and writes it to the fig folder</li>
<li>
<code>create_plots()</code> - takes a list of files as input, calls
<code>create_plot()</code> for each element in the list</li>
<li>
<code>main()</code> - calls <code>parse_arguments()</code> and
<code>create_plots()</code>
</li>
</ul>
<p>Below is a template that will help you write these functions. The
<code>"""</code> syntax indicates a multi-line comment. If these
comments are the first thing in a function, they are known as a
<code>Docstring</code>.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="im">import</span> glob</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="im">import</span> pandas</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="co"># we need to import part of matplotlib</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="co"># because we are no longer in a notebook</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a><span class="kw">def</span> parse_arguments(argv):</span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a><span class="co">    Parse the argument list passed from the command line</span></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a><span class="co">    (after the program filename is removed) and return a list</span></span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a><span class="co">    of filenames.</span></span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a></span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a><span class="co">    Input:</span></span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a><span class="co">    ------</span></span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a><span class="co">        argument list (normally sys.argv[1:])</span></span>
<span id="cb2-18"><a href="#cb2-18" tabindex="-1"></a></span>
<span id="cb2-19"><a href="#cb2-19" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb2-20"><a href="#cb2-20" tabindex="-1"></a><span class="co">    --------</span></span>
<span id="cb2-21"><a href="#cb2-21" tabindex="-1"></a><span class="co">        filenames: list of strings, list of files to plot</span></span>
<span id="cb2-22"><a href="#cb2-22" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb2-23"><a href="#cb2-23" tabindex="-1"></a></span>
<span id="cb2-24"><a href="#cb2-24" tabindex="-1"></a></span>
<span id="cb2-25"><a href="#cb2-25" tabindex="-1"></a><span class="kw">def</span> create_plot(filename):</span>
<span id="cb2-26"><a href="#cb2-26" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb2-27"><a href="#cb2-27" tabindex="-1"></a><span class="co">    Creates a plot for the specified</span></span>
<span id="cb2-28"><a href="#cb2-28" tabindex="-1"></a><span class="co">    data file.</span></span>
<span id="cb2-29"><a href="#cb2-29" tabindex="-1"></a></span>
<span id="cb2-30"><a href="#cb2-30" tabindex="-1"></a><span class="co">    Input:</span></span>
<span id="cb2-31"><a href="#cb2-31" tabindex="-1"></a><span class="co">    ------</span></span>
<span id="cb2-32"><a href="#cb2-32" tabindex="-1"></a><span class="co">        filename: string, path to file to plot</span></span>
<span id="cb2-33"><a href="#cb2-33" tabindex="-1"></a></span>
<span id="cb2-34"><a href="#cb2-34" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb2-35"><a href="#cb2-35" tabindex="-1"></a><span class="co">    --------</span></span>
<span id="cb2-36"><a href="#cb2-36" tabindex="-1"></a><span class="co">        none</span></span>
<span id="cb2-37"><a href="#cb2-37" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb2-38"><a href="#cb2-38" tabindex="-1"></a></span>
<span id="cb2-39"><a href="#cb2-39" tabindex="-1"></a></span>
<span id="cb2-40"><a href="#cb2-40" tabindex="-1"></a><span class="kw">def</span> create_plots(filenames):</span>
<span id="cb2-41"><a href="#cb2-41" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb2-42"><a href="#cb2-42" tabindex="-1"></a><span class="co">    Takes in a list of filenames to plot</span></span>
<span id="cb2-43"><a href="#cb2-43" tabindex="-1"></a><span class="co">    and creates a plot for each file.</span></span>
<span id="cb2-44"><a href="#cb2-44" tabindex="-1"></a></span>
<span id="cb2-45"><a href="#cb2-45" tabindex="-1"></a><span class="co">    Input:</span></span>
<span id="cb2-46"><a href="#cb2-46" tabindex="-1"></a><span class="co">    ------</span></span>
<span id="cb2-47"><a href="#cb2-47" tabindex="-1"></a><span class="co">        filenames: list of strings, list of files to plot</span></span>
<span id="cb2-48"><a href="#cb2-48" tabindex="-1"></a></span>
<span id="cb2-49"><a href="#cb2-49" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb2-50"><a href="#cb2-50" tabindex="-1"></a><span class="co">    --------</span></span>
<span id="cb2-51"><a href="#cb2-51" tabindex="-1"></a><span class="co">        none</span></span>
<span id="cb2-52"><a href="#cb2-52" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb2-53"><a href="#cb2-53" tabindex="-1"></a></span>
<span id="cb2-54"><a href="#cb2-54" tabindex="-1"></a></span>
<span id="cb2-55"><a href="#cb2-55" tabindex="-1"></a><span class="kw">def</span> main():</span>
<span id="cb2-56"><a href="#cb2-56" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb2-57"><a href="#cb2-57" tabindex="-1"></a><span class="co">    main function - does all the work</span></span>
<span id="cb2-58"><a href="#cb2-58" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb2-59"><a href="#cb2-59" tabindex="-1"></a></span>
<span id="cb2-60"><a href="#cb2-60" tabindex="-1"></a></span>
<span id="cb2-61"><a href="#cb2-61" tabindex="-1"></a></span>
<span id="cb2-62"><a href="#cb2-62" tabindex="-1"></a><span class="co"># call main</span></span>
<span id="cb2-63"><a href="#cb2-63" tabindex="-1"></a>main()</span></code></pre>
</div>
<div id="adding-docstrings" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="adding-docstrings" class="callout-inner">
<h3 class="callout-title">Adding Docstrings</h3>
<div class="callout-content">
<p>In an effort to create human-readable code. It is common to include a
“docstring” or “Python Documentation String”, at the top of each
function that clearly lay out three things: the purpose or objective of
the function, a description of the inputs and their datatypes, and a
description of what is returned and their data types. By including these
things, debugging later on is much more efficient because now the
developer knows the starting point (inputs), endpoints (returns), and
what the intended change is (purpose).</p>
</div>
</div>
</div>
<p>Let’s move the code into the functions now:</p>
<div id="exercise-refactor-the-code" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-refactor-the-code" class="callout-inner">
<h3 class="callout-title">Exercise: refactor the code</h3>
<div class="callout-content">
<p>Now that we have a plan for refactoring and a template to work from,
create a new script called <code>refactored_gdp_plot.py</code>. Paste
the template from above into the new script. Then copy and paste the
code from <code>gdp_plot.py</code> script into the corresponding
functions.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="im">import</span> glob</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="im">import</span> pandas</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="co"># we need to import part of matplotlib</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="co"># because we are no longer in a notebook</span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a><span class="kw">def</span> parse_arguments(argv):</span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a><span class="co">    Parse the argument list passed from the command line</span></span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a><span class="co">    (after the program filename is removed) and return a list</span></span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a><span class="co">    of filenames.</span></span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a></span>
<span id="cb3-15"><a href="#cb3-15" tabindex="-1"></a><span class="co">    Input:</span></span>
<span id="cb3-16"><a href="#cb3-16" tabindex="-1"></a><span class="co">    ------</span></span>
<span id="cb3-17"><a href="#cb3-17" tabindex="-1"></a><span class="co">        argument list (normally sys.argv[1:])</span></span>
<span id="cb3-18"><a href="#cb3-18" tabindex="-1"></a></span>
<span id="cb3-19"><a href="#cb3-19" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb3-20"><a href="#cb3-20" tabindex="-1"></a><span class="co">    --------</span></span>
<span id="cb3-21"><a href="#cb3-21" tabindex="-1"></a><span class="co">        filenames: list of strings, list of files to plot</span></span>
<span id="cb3-22"><a href="#cb3-22" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb3-23"><a href="#cb3-23" tabindex="-1"></a><span class="co"># make sure additional arguments or flags have</span></span>
<span id="cb3-24"><a href="#cb3-24" tabindex="-1"></a>    <span class="co"># been provided by the user</span></span>
<span id="cb3-25"><a href="#cb3-25" tabindex="-1"></a>    <span class="cf">if</span> argv <span class="op">==</span> []:</span>
<span id="cb3-26"><a href="#cb3-26" tabindex="-1"></a>        <span class="co"># why the program will not continue</span></span>
<span id="cb3-27"><a href="#cb3-27" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"Not enough arguments have been provided"</span>)</span>
<span id="cb3-28"><a href="#cb3-28" tabindex="-1"></a>        <span class="co"># how this can be corrected</span></span>
<span id="cb3-29"><a href="#cb3-29" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"Usage: python gdp_plots.py &lt;filenames&gt;"</span>)</span>
<span id="cb3-30"><a href="#cb3-30" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"Options:"</span>)</span>
<span id="cb3-31"><a href="#cb3-31" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"-a : plot all gdp data sets in current directory"</span>)</span>
<span id="cb3-32"><a href="#cb3-32" tabindex="-1"></a></span>
<span id="cb3-33"><a href="#cb3-33" tabindex="-1"></a>    <span class="co"># check for -a flag in arguments</span></span>
<span id="cb3-34"><a href="#cb3-34" tabindex="-1"></a>    <span class="cf">if</span> <span class="st">"-a"</span> <span class="kw">in</span> argv:</span>
<span id="cb3-35"><a href="#cb3-35" tabindex="-1"></a>        filenames <span class="op">=</span> glob.glob(<span class="st">"*gdp*.csv"</span>)</span>
<span id="cb3-36"><a href="#cb3-36" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb3-37"><a href="#cb3-37" tabindex="-1"></a>        filenames <span class="op">=</span> argv</span>
<span id="cb3-38"><a href="#cb3-38" tabindex="-1"></a></span>
<span id="cb3-39"><a href="#cb3-39" tabindex="-1"></a>    <span class="cf">return</span> filenames</span>
<span id="cb3-40"><a href="#cb3-40" tabindex="-1"></a></span>
<span id="cb3-41"><a href="#cb3-41" tabindex="-1"></a><span class="kw">def</span> create_plot(filename):</span>
<span id="cb3-42"><a href="#cb3-42" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb3-43"><a href="#cb3-43" tabindex="-1"></a><span class="co">    Creates a plot for the specified</span></span>
<span id="cb3-44"><a href="#cb3-44" tabindex="-1"></a><span class="co">    data file.</span></span>
<span id="cb3-45"><a href="#cb3-45" tabindex="-1"></a></span>
<span id="cb3-46"><a href="#cb3-46" tabindex="-1"></a><span class="co">    Input:</span></span>
<span id="cb3-47"><a href="#cb3-47" tabindex="-1"></a><span class="co">    ------</span></span>
<span id="cb3-48"><a href="#cb3-48" tabindex="-1"></a><span class="co">        filename: string, path to file to plot</span></span>
<span id="cb3-49"><a href="#cb3-49" tabindex="-1"></a></span>
<span id="cb3-50"><a href="#cb3-50" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb3-51"><a href="#cb3-51" tabindex="-1"></a><span class="co">    --------</span></span>
<span id="cb3-52"><a href="#cb3-52" tabindex="-1"></a><span class="co">        none</span></span>
<span id="cb3-53"><a href="#cb3-53" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb3-54"><a href="#cb3-54" tabindex="-1"></a></span>
<span id="cb3-55"><a href="#cb3-55" tabindex="-1"></a>    <span class="co"># load data and transpose so that country names are</span></span>
<span id="cb3-56"><a href="#cb3-56" tabindex="-1"></a>    <span class="co"># the columns and their gdp data becomes the rows</span></span>
<span id="cb3-57"><a href="#cb3-57" tabindex="-1"></a>    data <span class="op">=</span> pandas.read_csv(filename, index_col <span class="op">=</span> <span class="st">'country'</span>).T</span>
<span id="cb3-58"><a href="#cb3-58" tabindex="-1"></a></span>
<span id="cb3-59"><a href="#cb3-59" tabindex="-1"></a>    <span class="co"># create a plot of the transposed data</span></span>
<span id="cb3-60"><a href="#cb3-60" tabindex="-1"></a>    ax <span class="op">=</span> data.plot(title <span class="op">=</span> filename)</span>
<span id="cb3-61"><a href="#cb3-61" tabindex="-1"></a></span>
<span id="cb3-62"><a href="#cb3-62" tabindex="-1"></a>    <span class="co"># set some plot attributes</span></span>
<span id="cb3-63"><a href="#cb3-63" tabindex="-1"></a>    ax.set_xlabel(<span class="st">"Year"</span>)</span>
<span id="cb3-64"><a href="#cb3-64" tabindex="-1"></a>    ax.set_ylabel(<span class="st">"GDP Per Capita"</span>)</span>
<span id="cb3-65"><a href="#cb3-65" tabindex="-1"></a>    <span class="co"># set the x locations and labels</span></span>
<span id="cb3-66"><a href="#cb3-66" tabindex="-1"></a>    ax.set_xticks(<span class="bu">range</span>(<span class="bu">len</span>(data.index)))</span>
<span id="cb3-67"><a href="#cb3-67" tabindex="-1"></a>    ax.set_xticklabels(data.index, rotation <span class="op">=</span> <span class="dv">45</span>)</span>
<span id="cb3-68"><a href="#cb3-68" tabindex="-1"></a></span>
<span id="cb3-69"><a href="#cb3-69" tabindex="-1"></a>    <span class="co"># save the plot with a unique file name</span></span>
<span id="cb3-70"><a href="#cb3-70" tabindex="-1"></a>    split_name1 <span class="op">=</span> filename.split(<span class="st">'.'</span>)[<span class="dv">0</span>] <span class="co">#data/gapminder_gdp_XXX</span></span>
<span id="cb3-71"><a href="#cb3-71" tabindex="-1"></a>    split_name2 <span class="op">=</span> filename.split(<span class="st">'/'</span>)[<span class="dv">1</span>]</span>
<span id="cb3-72"><a href="#cb3-72" tabindex="-1"></a>    save_name <span class="op">=</span> <span class="st">'figs/'</span><span class="op">+</span>split_name2 <span class="op">+</span> <span class="st">'.png'</span></span>
<span id="cb3-73"><a href="#cb3-73" tabindex="-1"></a>    plt.savefig(save_name)</span>
<span id="cb3-74"><a href="#cb3-74" tabindex="-1"></a></span>
<span id="cb3-75"><a href="#cb3-75" tabindex="-1"></a><span class="kw">def</span> create_plots(filenames):</span>
<span id="cb3-76"><a href="#cb3-76" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb3-77"><a href="#cb3-77" tabindex="-1"></a><span class="co">    Takes in a list of filenames to plot</span></span>
<span id="cb3-78"><a href="#cb3-78" tabindex="-1"></a><span class="co">    and creates a plot for each file.</span></span>
<span id="cb3-79"><a href="#cb3-79" tabindex="-1"></a></span>
<span id="cb3-80"><a href="#cb3-80" tabindex="-1"></a><span class="co">    Input:</span></span>
<span id="cb3-81"><a href="#cb3-81" tabindex="-1"></a><span class="co">    ------</span></span>
<span id="cb3-82"><a href="#cb3-82" tabindex="-1"></a><span class="co">       filenames: list of strings, list of files to plot</span></span>
<span id="cb3-83"><a href="#cb3-83" tabindex="-1"></a></span>
<span id="cb3-84"><a href="#cb3-84" tabindex="-1"></a><span class="co">   Returns:</span></span>
<span id="cb3-85"><a href="#cb3-85" tabindex="-1"></a><span class="co">   --------</span></span>
<span id="cb3-86"><a href="#cb3-86" tabindex="-1"></a><span class="co">       none</span></span>
<span id="cb3-87"><a href="#cb3-87" tabindex="-1"></a><span class="co">   """</span></span>
<span id="cb3-88"><a href="#cb3-88" tabindex="-1"></a></span>
<span id="cb3-89"><a href="#cb3-89" tabindex="-1"></a>    <span class="cf">for</span> filename <span class="kw">in</span> filenames:</span>
<span id="cb3-90"><a href="#cb3-90" tabindex="-1"></a>        create_plot(filename)</span>
<span id="cb3-91"><a href="#cb3-91" tabindex="-1"></a></span>
<span id="cb3-92"><a href="#cb3-92" tabindex="-1"></a></span>
<span id="cb3-93"><a href="#cb3-93" tabindex="-1"></a><span class="kw">def</span> main():</span>
<span id="cb3-94"><a href="#cb3-94" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb3-95"><a href="#cb3-95" tabindex="-1"></a><span class="co">    main function - does all the work</span></span>
<span id="cb3-96"><a href="#cb3-96" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb3-97"><a href="#cb3-97" tabindex="-1"></a></span>
<span id="cb3-98"><a href="#cb3-98" tabindex="-1"></a>    <span class="co"># parse arguments</span></span>
<span id="cb3-99"><a href="#cb3-99" tabindex="-1"></a>    files_to_plot <span class="op">=</span> parse_arguments(sys.argv[<span class="dv">1</span>:])</span>
<span id="cb3-100"><a href="#cb3-100" tabindex="-1"></a></span>
<span id="cb3-101"><a href="#cb3-101" tabindex="-1"></a>    <span class="co">#generate plots</span></span>
<span id="cb3-102"><a href="#cb3-102" tabindex="-1"></a>    create_plots(files_to_plot)</span>
<span id="cb3-103"><a href="#cb3-103" tabindex="-1"></a></span>
<span id="cb3-104"><a href="#cb3-104" tabindex="-1"></a><span class="co"># call main</span></span>
<span id="cb3-105"><a href="#cb3-105" tabindex="-1"></a>main()</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>The behavior of the program hasn’t changed, but it has been made more
modular by separating the into different functions with their own
purpose.</p>
<p>Why the extra function? Our function main has two primary components
to it</p>
<ol style="list-style-type: decimal">
<li>parsing arguments handed to the program</li>
<li>generating the desired plots</li>
</ol>
<p>But we’ve defined three functions above the <code>main</code>
function: <code>parse_arguments</code>, <code>create_plot</code>, and
<code>create_plots</code>.</p>
<p>If the functions in our file directly reflected the components in
<code>main</code> we would only have the <code>parse_arguments</code>
and <code>create_plots</code> functions. If we think about using these
functions independently, however, a function which always takes in a
list of filenames isn’t very convenient to use on its own. By defining
the <code>create_plot</code> function, we have placed most of the plot
generation work there, while allowing for a very simple definition of
the <code>create_plots</code> function.</p>
<p>The importance of this design decision will be made clear in the next
lesson.</p>
<p>Before we commit we need to change our
<code>refactored_gdp_plot.py</code> script to <code>gdp_plot.py</code>
since we don’t want to keep two copies of this script around in our
repo. We only made this as a separate script to make it easier to
copy-paste. Once you’ve tested it, you can either rename
<code>refactored_gdp_plot.py</code> script to <code>gdp_plot.py</code>
or copy the contents of <code>refactored_gdp_plot.py</code> script to
<code>gdp_plot.py</code> and delete
<code>refactored_gdp_plot.py</code>.</p>
<div class="section level4">
<h4 id="update-the-repository">Update the Repository<a class="anchor" aria-label="anchor" href="#update-the-repository"></a>
</h4>
<p>We haven’t changed the behavior of our program, but our <em>code</em>
has changed, so let’s update the repository.</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="ex">$</span> git add gdp_plots.py</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Refactoring code."</span></span></code></pre>
</div>
<div id="branching-and-refactoring" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="branching-and-refactoring" class="callout-inner">
<h3 class="callout-title">Branching and Refactoring</h3>
<div class="callout-content">
<p>To demonstrate that the behavior of our program hasn’t changed, try
running it a few different ways using both the <code>master</code> and
<code>refactor</code> branches. Remember that the command for checking
out a branch is <code>git checkout &lt;branch_name&gt;</code>.</p>
</div>
</div>
</div>
<p>Now that we’re satisfied with our refactor. We can merge this branch
into our master branch.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">$</span> git checkout master</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="ex">$</span> git merge refactor</span></code></pre>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>Refactoring makes code more modular, easier to read, and easier to
understand.</li>
<li>Refactoring requires one to consdier future implications and
generally enables others to use your code more easily.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</section></section><section id="aio-34-importing"><p>Content from <a href="34-importing.html">Running Scripts and Importing</a></p>
<hr>
<p>Last updated on 2025-01-27 |

        <a href="https://github.com/carpentries-incubator/swc-ext-python/edit/main/episodes/34-importing.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I import some of my work even if it is part of a
program?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Learn how to import functions from one script into another.</li>
<li>Understand the difference between using a file as a module and
running it as a script or program.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>In our last lesson we learned how refactoring code makes it easier to
understand organize into pices that each have their own purpose. The
added modularity also makes it easier to use in other places.</p>
<p>First, let’s start a Jupyter notebook in our current directory and
see what happens if we try to import our file as it is.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="im">import</span> gdp_plots</span></code></pre>
</div>
<p>The result is an error related to how Python is attempting to
interpret the file. This is because Python is encountering our call to
the function <code>main</code> and isn’t sure how to proceed.</p>
<div id="running-versus-importing" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="running-versus-importing" class="callout-inner">
<h3 class="callout-title">Running Versus Importing</h3>
<div class="callout-content">
<p>Running a Python script in bash is very similar to importing that
file in Python. The biggest difference is that we don’t expect anything
to happen when we import a file, whereas when running a script, we
expect to see some output printed to the console.</p>
<p>In order for a Python script to work as expected when imported or
when run as a script, we typically put the part of the script that
produces output in the following if statement:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>    main()  <span class="co"># Or whatever function produces output</span></span></code></pre>
</div>
<p>When you import a Python file, <code>__name__</code> is the name of
that file (e.g., when importing <code>pandas_plots.py</code>,
<code>__name__</code> is <code>'pandas_plots'</code>). However, when
running a script in bash, <code>__name__</code> is always set to
<code>'__main__'</code> in that script so that you can determine if the
file is being imported or run as a script.</p>
</div>
</div>
</div>
<p>Let’s add the main function in our script to a section which
identifies the program as being called from the command line.</p>
<pre>
import sys
import glob
import pandas
# we need to import part of matplotlib
# because we are no longer in a notebook
import matplotlib.pyplot as plt


def parse_arguments(argv):
    """
    Parse the argument list passed from the command line
    (after the program filename is removed) and return a list
    of filenames.

    Input:
    ------
        argument list (normally sys.argv[1:])

    Returns:
    --------
        filenames: list of strings, list of files to plot
    """

    # make sure additional arguments or flags have
    # been provided by the user
    if argv == []:
        # why the program will not continue
        print("Not enough arguments have been provided")
        # how this can be corrected
        print("Usage: python gdp_plots.py ")
        print("Options:")
        print("-a : plot all gdp data sets in current directory")

    # check for -a flag in arguments
    if "-a" in argv:
        filenames = glob.glob("data/*gdp*.csv")
    else:
        filenames = argv

    return filenames


def create_plot(filename):
    """
    Creates a plot for the specified
    data file.

    Input:
    ------
        filename: string, path to file to plot

    Returns:
    --------
        none
    """

    # load data and transpose so that country names are
    # the columns and their gdp data becomes the rows
    data = pandas.read_csv(filename, index_col = 'country').T

    # create a plot of the transposed data
    ax = data.plot(title = filename)

    # set some plot attributes
    ax.set_xlabel("Year")
    ax.set_ylabel("GDP Per Capita")
    # set the x locations and labels
    ax.set_xticks(range(len(data.index)))
    ax.set_xticklabels(data.index, rotation = 45)

    # save the plot with a unique file name
    split_name1 = filename.split('.')[0] #data/gapminder_gdp_XXX
    split_name2 = filename.split('/')[1]
    save_name = 'figs/'+split_name2 + '.png'
    plt.savefig(save_name)


def create_plots(filenames):
    """
    Takes in a list of filenames to plot
    and creates a plot for each file.

    Input:
    ------
        filenames: list of strings, list of files to plot

    Returns:
    --------
        none
    """

    for filename in filenames:
        create_plot(filename)


def main():
    """
    main function - does all the work
    """
    # parse arguments
    files_to_plot = parse_arguments(sys.argv[1:])

    #generate plots
    create_plots(files_to_plot)
<b>

if __name__ == "__main__":
    # call main
    main()</b>
</pre>
<p>Now let’s go back to the Jupyter notebook and try importing the file
again.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="im">import</span> gdp_plots</span></code></pre>
</div>
<p>Success! You’ve just written your first Python module. Any of the
functions in that module can now be accessed in our Jupyter notebook
session.</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>gdp_plots.create_plot(<span class="st">"data/gapminder_gdp_oceania.csv"</span>)</span></code></pre>
</div>
<div class="section level3">
<h3 id="update-the-repository">Update the repository<a class="anchor" aria-label="anchor" href="#update-the-repository"></a>
</h3>
<p>Back in the terminal, let’s commit these changes to our
repository.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">$</span> git add gdp_plots.py</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Moving call to the main function."</span></span></code></pre>
</div>
<div id="writing-modular-code" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="writing-modular-code" class="callout-inner">
<h3 class="callout-title">Writing Modular Code</h3>
<div class="callout-content">
<p>In our previous lesson we refactored our code for clarity and
modularity. As part of that process we created two functions
<code>create_plot</code> and <code>create_plots</code>. While the
<code>create_plot</code> function wasn’t used in our program, imagine
importing our module and finding that the only way to generate a plot
for a single file is to add that filename to a list before passing that
list to <code>create_plots</code>.</p>
<p>This might seem very strange or confusing to someone importing our
module for the first time. It take time to develop an intuition for
design decisions like these, but here are a few questions to ask
yourself as a guide when organizing code:</p>
<ul>
<li>Are my functions able to stand on their own? Do they accomplish
simple tasks?</li>
<li>Is it easy to write a clear function names in my module? A function
with the name “create_plots_and_export_data” is likely better off being
borken up into two functions “create_plots” and “export_data”</li>
<li>Are my function names plural? In our example, it may have felt more
natural to create only one function, “create_plots”. In these cases, it
is almost always useful to create a function which does our operation
once (“create_plot”) and another plural form of the function
(“create_plots”) which contains a loop over the singular function.</li>
</ul>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>The <code>__name__</code> variable allows us to know whether the
file is being imported or run as a script.</li>
</ul>
</div>
</div>
</div>
</div></section><section id="aio-48-style"><p>Content from <a href="48-style.html">Programming Style</a></p>
<hr>
<p>Last updated on 2025-01-27 |

        <a href="https://github.com/carpentries-incubator/swc-ext-python/edit/main/episodes/48-style.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I make my programs more readable?</li>
<li>How do most programmers format their code?</li>
<li>How can programs check their own operation?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Provide sound justifications for basic rules of coding style.</li>
<li>Refactor one-page programs to make them more readable and justify
the changes.</li>
<li>Use Python community coding standards (PEP-8).</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="follow-standard-python-style-in-your-code-">Follow standard Python style in your code.<a class="anchor" aria-label="anchor" href="#follow-standard-python-style-in-your-code-"></a>
</h2>
<hr class="half-width">
<ul>
<li>
<a href="https://www.python.org/dev/peps/pep-0008" class="external-link">PEP8</a>: a style
guide for Python that discusses topics such as how you should name
variables, how you should use indentation in your code, how you should
structure your <code>import</code> statements, etc. Adhering to PEP8
makes it easier for other Python developers to read and understand your
code, and to understand what their contributions should look like. The
<a href="https://pypi.python.org/pypi/pep8" class="external-link">PEP8 application and Python
library</a> can check your code for compliance with PEP8.</li>
</ul>
<p><strong>Best Practice: Write programs for people and not for
computers!</strong></p>
</section><section><h2 class="section-heading" id="use-assertions-to-check-for-internal-errors-">Use assertions to check for internal errors.<a class="anchor" aria-label="anchor" href="#use-assertions-to-check-for-internal-errors-"></a>
</h2>
<hr class="half-width">
<p>Assertions are a simple, but powerful method for making sure that the
context in which your code is executing is as you expect.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="kw">def</span> calc_bulk_density(mass, volume):</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>    <span class="co">'''Return dry bulk density = powder mass / powder volume.'''</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>    <span class="cf">assert</span> volume <span class="op">&gt;</span> <span class="dv">0</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>    <span class="cf">return</span> mass <span class="op">/</span> volume</span></code></pre>
</div>
<p>If the assertion is <code>False</code>, the Python interpreter raises
an <code>AssertionError</code> runtime exception. The source code for
the expression that failed will be displayed as part of the error
message. To ignore assertions in your code run the interpreter with the
‘-O’ (optimize) switch. Assertions should contain only simple checks and
never change the state of the program. For example, an assertion should
never contain an assignment.</p>
<p><strong>Best Practice: Plan for mistakes</strong></p>
</section><section><h2 class="section-heading" id="use-docstrings-to-provide-online-help-">Use docstrings to provide online help.<a class="anchor" aria-label="anchor" href="#use-docstrings-to-provide-online-help-"></a>
</h2>
<hr class="half-width">
<p><strong>Best Practice: Document design &amp; purpose, not just
mechanics</strong></p>
<ul>
<li>If the first thing in a function is a character string that is not
assigned to a variable, Python attaches it to the function as the online
help.</li>
<li>Called a <em>docstring</em> (short for “documentation string”).</li>
</ul>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="kw">def</span> average(values):</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>    <span class="co">"Return average of values, or None if no values are supplied."</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(values) <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">None</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">sum</span>(values) <span class="op">/</span> average(values)</span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="bu">help</span>(average)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Help on function average in module __main__:

average(values)
    Return average of values, or None if no values are supplied.</code></pre>
</div>
<div id="multiline-strings" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="multiline-strings" class="callout-inner">
<h3 class="callout-title">Multiline Strings</h3>
<div class="callout-content">
<p>Often use <em>multiline strings</em> for documentation. These start
and end with three quote characters (either single or double) and end
with three matching characters.</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co">"""This string spans</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="co">multiple lines.</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="co">Blank lines are allowed."""</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="what-will-be-shown" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="what-will-be-shown" class="callout-inner">
<h3 class="callout-title">What Will Be Shown?</h3>
<div class="callout-content">
<p>Highlight the lines in the code below that will be available as
online help. Are there lines that should be made available, but won’t
be? Will any lines produce a syntax error or a runtime error?</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="co">"Find maximum edit distance between multiple sequences."</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="co"># This finds the maximum distance between all sequences.</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="kw">def</span> overall_max(sequences):</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>    <span class="co">'''Determine overall maximum edit distance.'''</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a>    highest <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a>    <span class="cf">for</span> left <span class="kw">in</span> sequences:</span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a>        <span class="cf">for</span> right <span class="kw">in</span> sequences:</span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a>            <span class="co">'''Avoid checking sequence against itself.'''</span></span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a>            <span class="cf">if</span> left <span class="op">!=</span> right:</span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a>                this <span class="op">=</span> edit_distance(left, right)</span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a>                highest <span class="op">=</span> <span class="bu">max</span>(highest, this)</span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a></span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a>    <span class="co"># Report.</span></span>
<span id="cb5-16"><a href="#cb5-16" tabindex="-1"></a>    <span class="cf">return</span> highest</span></code></pre>
</div>
</div>
</div>
</div>
<div id="document-this" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="document-this" class="callout-inner">
<h3 class="callout-title">Document This</h3>
<div class="callout-content">
<p>Turn the comment on the following function into a docstring and check
that <code>help</code> displays it properly.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="kw">def</span> middle(a, b, c):</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>    <span class="co"># Return the middle value of three.</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>    <span class="co"># Assumes the values can actually be compared.</span></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a>    values <span class="op">=</span> [a, b, c]</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>    values.sort()</span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a>    <span class="cf">return</span> values[<span class="dv">1</span>]</span></code></pre>
</div>
</div>
</div>
</div>
<div id="clean-up-this-code" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="clean-up-this-code" class="callout-inner">
<h3 class="callout-title">Clean Up This Code</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li>Read this short program and try to predict what it does.</li>
<li>Run it: how accurate was your prediction?</li>
<li>Refactor the program to make it more readable. Remember to run it
after each change to ensure its behavior hasn’t changed.</li>
<li>Compare your rewrite with your neighbor’s. What did you do the same?
What did you do differently, and why?</li>
</ol>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>n <span class="op">=</span> <span class="bu">int</span>(sys.argv[<span class="dv">1</span>])</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>s <span class="op">=</span> sys.argv[<span class="dv">2</span>]</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="bu">print</span>(s)</span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>i <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="cf">while</span> i <span class="op">&lt;</span> n:</span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a>    <span class="co"># print('at', j)</span></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a>    new <span class="op">=</span> <span class="st">''</span></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a>    <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(s)):</span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a>        left <span class="op">=</span> j<span class="op">-</span><span class="dv">1</span></span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a>        right <span class="op">=</span> (j<span class="op">+</span><span class="dv">1</span>)<span class="op">%</span><span class="bu">len</span>(s)</span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a>        <span class="cf">if</span> s[left]<span class="op">==</span>s[right]: new <span class="op">+=</span> <span class="st">'-'</span></span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a>        <span class="cf">else</span>: new <span class="op">+=</span> <span class="st">'*'</span></span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a>    s<span class="op">=</span><span class="st">''</span>.join(new)</span>
<span id="cb7-15"><a href="#cb7-15" tabindex="-1"></a>    <span class="bu">print</span>(s)</span>
<span id="cb7-16"><a href="#cb7-16" tabindex="-1"></a>    i <span class="op">+=</span> <span class="dv">1</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>Here’s one solution.</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="kw">def</span> string_machine(input_string, iterations):</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="co">    Takes input_string and generates a new string with -'s and *'s</span></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a><span class="co">    corresponding to characters that have identical adjacent characters</span></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a><span class="co">    or not, respectively.  Iterates through this procedure with the resultant</span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a><span class="co">    strings for the supplied number of iterations.</span></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a>    <span class="bu">print</span>(input_string)</span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a>    old <span class="op">=</span> input_string</span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(iterations):</span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a>        new <span class="op">=</span> <span class="st">''</span></span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a>        <span class="co"># iterate through characters in previous string</span></span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a>        <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(s)):</span>
<span id="cb8-14"><a href="#cb8-14" tabindex="-1"></a>            left <span class="op">=</span> j<span class="op">-</span><span class="dv">1</span></span>
<span id="cb8-15"><a href="#cb8-15" tabindex="-1"></a>            right <span class="op">=</span> (j<span class="op">+</span><span class="dv">1</span>)<span class="op">%</span><span class="bu">len</span>(s) <span class="co"># ensure right index wraps around</span></span>
<span id="cb8-16"><a href="#cb8-16" tabindex="-1"></a>            <span class="cf">if</span> old[left]<span class="op">==</span>old[right]:</span>
<span id="cb8-17"><a href="#cb8-17" tabindex="-1"></a>                new <span class="op">+=</span> <span class="st">'-'</span></span>
<span id="cb8-18"><a href="#cb8-18" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb8-19"><a href="#cb8-19" tabindex="-1"></a>                new <span class="op">+=</span> <span class="st">'*'</span></span>
<span id="cb8-20"><a href="#cb8-20" tabindex="-1"></a>        <span class="bu">print</span>(new)</span>
<span id="cb8-21"><a href="#cb8-21" tabindex="-1"></a>        <span class="co"># store new string as old</span></span>
<span id="cb8-22"><a href="#cb8-22" tabindex="-1"></a>        old <span class="op">=</span> new</span>
<span id="cb8-23"><a href="#cb8-23" tabindex="-1"></a></span>
<span id="cb8-24"><a href="#cb8-24" tabindex="-1"></a>string_machine(<span class="st">'et cetera'</span>, <span class="dv">10</span>)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>Follow standard Python style in your code.</li>
<li>Use docstrings to provide online help.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-49-wrap"><p>Content from <a href="49-wrap.html">Wrap-Up</a></p>
<hr>
<p>Last updated on 2025-01-27 |

        <a href="https://github.com/carpentries-incubator/swc-ext-python/edit/main/episodes/49-wrap.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What have we learned?</li>
<li>What else is out there and where do I find it?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Name and locate scientific Python community sites for software,
workshops, and help.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Leslie Lamport once said, “Writing is nature’s way of showing you how
sloppy your thinking is.” The same is true of programming: many things
that seem obvious when we’re thinking about them turn out to be anything
but when we have to explain them precisely.</p>
<section><h2 class="section-heading" id="python-supports-a-large-community-within-and-outwith-research-">Python supports a large community within and outwith research.<a class="anchor" aria-label="anchor" href="#python-supports-a-large-community-within-and-outwith-research-"></a>
</h2>
<hr class="half-width">
<ul>
<li><p>The <a href="https://docs.python.org/3/" class="external-link">Python 3
documentation</a> covers the core language and the standard
library.</p></li>
<li><p><a href="https://pycon.org/" class="external-link">PyCon</a> is the largest annual
conference for the Python community.</p></li>
<li><p><a href="https://scipy.org/" class="external-link">SciPy</a> is a rich collection of
scientific utilities. It is also the name of <a href="https://conference.scipy.org/" class="external-link">a series of annual
conferences</a>.</p></li>
<li><p><a href="https://jupyter.org/" class="external-link">Jupyter</a> is the home of the
Jupyter Notebook.</p></li>
<li><p><a href="https://pandas.pydata.org/" class="external-link">Pandas</a> is the home of
the Pandas data library.</p></li>
<li><p>Stack Overflow’s <a href="https://stackoverflow.com/questions/tagged/python" class="external-link">general Python
section</a> can be helpful, as can the sections on <a href="https://stackoverflow.com/questions/tagged/numpy" class="external-link">NumPy</a>, <a href="https://stackoverflow.com/questions/tagged/scipy" class="external-link">SciPy</a>, <a href="https://stackoverflow.com/questions/tagged/pandas" class="external-link">Pandas</a>, and
other topics.</p></li>
</ul>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>Python supports a large community within and outwith research.</li>
</ul>
</div>
</div>
</div>
</section></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/carpentries-incubator/swc-ext-python/edit/main/README.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/carpentries-incubator/swc-ext-python/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/carpentries-incubator/swc-ext-python/" class="external-link">Source</a></p>
				<p><a href="https://github.com/carpentries-incubator/swc-ext-python/blob/main/CITATION" class="external-link">Cite</a> | <a href="mailto:lessons@software-carpentry.org">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.17.1" class="external-link">sandpaper (0.17.1)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.9" class="external-link">pegboard (0.7.9)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.7" class="external-link">varnish (1.0.7)</a></p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "LearningResource",
  "@id": "https://carpentries-incubator.github.io/swc-ext-python/aio.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/LearningResource/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "All in One View",
  "creativeWorkStatus": "active",
  "url": "https://carpentries-incubator.github.io/swc-ext-python/aio.html",
  "identifier": "https://carpentries-incubator.github.io/swc-ext-python/aio.html",
  "dateCreated": "2014-10-21",
  "dateModified": "2025-08-12",
  "datePublished": "2025-08-12"
}

  </script><script>
		feather.replace();
	</script><!-- Matomo --><script>
          var _paq = window._paq = window._paq || [];
          /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
          _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
          _paq.push(["setDomains", ["*.lessons.carpentries.org","*.datacarpentry.github.io","*.datacarpentry.org","*.librarycarpentry.github.io","*.librarycarpentry.org","*.swcarpentry.github.io", "*.carpentries.github.io"]]);
          _paq.push(["setDoNotTrack", true]);
          _paq.push(["disableCookies"]);
          _paq.push(["trackPageView"]);
          _paq.push(["enableLinkTracking"]);
          (function() {
              var u="https://matomo.carpentries.org/";
              _paq.push(["setTrackerUrl", u+"matomo.php"]);
              _paq.push(["setSiteId", "1"]);
              var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0];
              g.async=true; g.src="https://matomo.carpentries.org/matomo.js"; s.parentNode.insertBefore(g,s);
          })();
        </script><!-- End Matomo Code -->
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

